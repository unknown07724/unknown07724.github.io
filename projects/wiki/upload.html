<!DOCTYPE html>
<html>
<head>
  <title>Upload Image - Memepedia</title>
  <style>
    body { font-family: sans-serif; display: flex; margin:0; height:100vh; }
    #sidebar { width: 250px; background: #eee; padding: 15px; box-sizing: border-box; overflow-y: auto; }
    #sidebar h2 { margin-top: 0; }
    #sidebar a, #sidebar button { display: block; padding: 8px; margin: 5px 0; text-decoration: none; background: #ddd; border: none; border-radius: 5px; color: black; cursor: pointer; }
    #sidebar a:hover, #sidebar button:hover { background: #ccc; }
    #content { flex: 1; padding: 15px; overflow-y: auto; }
    input[type="file"] { margin-top: 10px; }
    #uploadBtn { margin-top: 10px; padding: 6px 12px; }
    pre { max-height: 200px; overflow-y: auto; background: #f4f4f4; padding: 5px; border-radius: 5px; }
  </style>
</head>
<body>
 <div id="sidebar">
   <img src="logo.svg" alt="Memepedia logo" width="175" height="175">
   <a href="index.html">Main page</a>
   <a href="edit.html">Create a page</a>
   <button>You can't edit the upload page bro</button>
   <a href="upload.html">Upload Image</a>
 </div>

 <div id="content">
   <h1>Upload images</h1>
   <input type="file" id="imageInput" accept="image/*"><br>
   <button id="uploadBtn">Submit</button>
   <p id="status"></p>
 </div>

 <script>
   const webhookURL = "https://discord.com/api/webhooks/1416905580035182702/9YTThtpOtgXA07J3GB9mdtmVPLz8L-gr-bBMp_daM6uy0msS5jGO0YdqjQTyjc7Q4lKy"; // replace with your Discord webhook

   document.getElementById('uploadBtn').addEventListener('click', () => {
     const file = document.getElementById('imageInput').files[0];
     if (!file) return alert("Select an image first!");

     const reader = new FileReader();
     reader.onload = () => {
       const dataURI = reader.result;              // full Data URI
       const base64 = dataURI.split(',')[1];       // just base64 part

       const payload = {
         username: "Memepedia Image Bot",
         embeds: [{
           title: file.name,
           description: `Image submitted for review.`,
           color: 3447003,
           fields: [
             { name: "Base64", value: base64 },
             { name: "Data URI", value: dataURI }
           ]
         }]
       };

       fetch(webhookURL, {
         method: 'POST',
         headers: { 'Content-Type': 'application/json' },
         body: JSON.stringify(payload)
       })
       .then(res => {
         document.getElementById('status').textContent = res.ok 
           ? "Image sent for review!" 
           : "Failed to send image.";
       })
       .catch(err => document.getElementById('status').textContent = "Error: " + err);
     };

     reader.readAsDataURL(file);
   });
 </script>
</body>
</html>
